<?phpdefined('BASEPATH') OR exit('No direct script access allowed');	class Login extends MX_Controller {	public function __construct() {	parent::__construct();		$this->load->library("session");		$this->load->helper('url');		$this->load->library('form_validation');		$this->load->model("Login_model");	//$this->load->module("dashboard");	}	public function index(){		if(!empty($_POST['login'])){			$this->session->set_userdata('name','test');				$this->form_validation->set_rules('email', 'Email','trim|valid_email|required');			$this->form_validation->set_rules('password', 'Password', 'required');			if($this->form_validation->run() === FALSE){				$this->load->view('index');			}else{				$result = $this->Login_model->login_user();				if($result==1){					redirect('');				}				elseif($result==3){					$this->session->set_flashdata('danger', 'Your account has not verified. Please check your email and verify your account First');					$this->load->view('index');				}				else{					$this->session->set_flashdata('danger', 'Invaild login credentials.Please try vaild credentials');					$this->load->view('index');				}			}					}else{			$this->load->view('index');		}	}		public function forgotPassword(){				if(!empty($_POST['forgot_password'])){							$this->form_validation->set_rules('email', 'Email','trim|valid_email|required');			if($this->form_validation->run() === FALSE){				$this->load->view('forgot-password');			}else{				$pass = rand();				$encrypt_password = md5($pass); 				$result = $this->Login_model->forgot_password($encrypt_password);					if($result==1){						$data['pass'] = $pass;						$subject ="Email Verifation";						$htmltemplate = modules::run("Email/forgotEmailTemplate",$data['pass']);						modules::run('Email/registrationEmail',$this->input->post('email'),$subject,$htmltemplate);						$this->session->set_flashdata('success', 'New password has been sent on your email');						$this->load->view('forgot-password');				}else{					$this->session->set_flashdata('danger', 'Invaild login credentials.Please try vaild credentials');					$this->load->view('forgot-password');				}			}					}else{			$this->load->view('forgot-password');		}			}}